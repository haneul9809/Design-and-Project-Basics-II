# Design-and-Project-Basics-II
구글 어시스턴트로 동작하는 무드등

## 🗓️ 개발 기간

2020/9/4 ~ 2020/11/11

## ⚙️ 기술 스택

- 무드등, 서버, 구글 어시스턴트
    - Front-end
        - python, pyQt, Qt5
    - Back-end
        - 구글 어시스턴트, Firebase, node.js
    - etc
        - VNC 원격 제어
- Smart Mood Light 기기
    - HW
        - Raspberry PI, Arduino Nano, 조도 센서, 와이파이 모듈(ESP8266), 네오픽셀, USB 마이크
        - 3D 프린팅
    - SW
        - C, C++
        - 123D Design 프로그램

## 📜서비스 내용

- 과제대상기술
    - 슬립테크
        - 정보통신(IT), 사물인터넷(IoT), 빅데이터 등의 IT 기술로 수면 상태를 분석하여 보여주고 숙면을 취할 수 있도록 유도하여 도움을 주는 기술을 뜻한다. 슬립테크는 주로 사물인터넷(IoT)을 사용한다.
        - 슬립테크는 수면 베개, 안대, 잠옷, 침대 등의 수면 보조제품을 비롯한 여러 제품에 정보통신(IT) 기술과 사물인터넷(IoT), 빅데이터, 헬스케어 기술 등을 접목 시켜 수면 상태나 패턴 등을 파악하여 좀 더 편안하게 깊이 잠들 수 있도록 도와주는 기술이다.
        - 슬립테크의 예로는 잠을 방해하는 소음을 줄이고 수면에 도움이 되는 소리를 제공해주는 무선 이어폰, 수면 중의 움직임을 체크하고 분석하는 스마트 베개, 잠이 들면 조명이 꺼지고 깰 시간에 서서히 밝아지는 수면 무드등 등이 있다.
    - 사물인터넷(IoT, internet of things)
        - 생활 속 사물들을 유무선 네트워크로 연결해 정보를 공유하는 환경으로, 각종 사물들에 통신 기능을 내장해 인터넷에 연결되도록 해 사람과 사물, 사물과 사물 간의 인터넷 기반 상호 소통 뿐만이 아니라 최근에는 단순한 사물 간의 연결을 넘어선 데이터, 클라우드, 모바일 등을 연결하는 환경인 만물 인터넷(IoE, Internet of Everything)으로 무인 자동차가 집이나 도로, 가로등과 지능적으로 연결되어 정보를 주고 받을 수 있다. 만물 인터넷은 사물인터넷보다 한 단계 더 발전한 형태이며 사람과 데이터, 공정, 경로, 모바일, 클라우드, 사물을 연결할 수 있는 환경이다.
    - 구글 어시스턴트 (Google Assistant)를 활용하여 슬립테크 기기인 음성 인식 제어가 가능한 무드등을 만들 예정이다. 구글 어시스턴트란 2016년에 구글에서 개발한 인공지능 양방향 대화 서비스이며 한국어를 지원하고 Android 및 iOS 운영체제와 호환이 가능하다. 'OK Google' 또는 'Hey Google'로 구글 어시스턴트를 실행하며 사람과 매우 흡사한 억양과 목소리톤을 구사하여 혼자서 미용실 예약을 해낸 사례도 있습니다.
- 문제 제기
    - CES 2020에서 살펴보는 슬립테크 동향
        - 서강대학교 정보통신대학 대우교수가 한국인터넷진흥원에 기고한 ‘CES 2020에서 살펴보는 슬립테크 동향’에 따르면 27개국 성인 2만 767명을 대상으로 수면 관련 설문조사를 실시한 결과 31%가 “충분히 자지 못하고 있다”고 응답했다. 일본(53%), 세르비아(51%), 헝가리(45%), 칠레(38%), 폴란드(38%) 순으로 수면 부족에 시달리고 있었다. **한국은 37%로 여섯 번째**였다.
        - 한국은 경제협력개발기구(OECD) 33개국 중 평균 수면시간이 끝에서 두 번째인 수면시간이 짧은 국가이기도 했다. 그리고 한국인의 하루 평균 수면시간은 471분으로 세계 평균(507분)보다 36분, 수면 시간이 가장 긴 남아프리카공화국(553분)보다는 82분 짧았다. **한국보다 수면시간이 짧은 국가는 일본(442분) 뿐**이었다.
    - 충분한 수면을 취하지 못했을 때의 부작용
        - 업무 생산성 저하
        - 사고 유발 가능성 증가
        - 건강 상실
            - 특히 건강의 경우 6시간 잔 사람의 질병 발생률이 8시간 잔 사람보다 13% 더 높게 나타나 숙면의 중요성이 더욱 부각되었다.
        - 수면 시간에 따른 피부상태 변화
            - 아모레퍼시픽과 중앙대병원 공동연구팀은 40대 여성 32명을 대상으로 조사했다. 수면시간이 절반으로 줄어들 때마다 수분은 64에서 54로 급감하고 각질 발생률은 15%에서 20%로 급증했다. 피부 장벽 회복속도는 정상치의 4분의1 수준으로 줄었으며 윤기, 탄력, 주름 문제도 악화되는 것으로 보아 수면 부족은 피부 건강에도 악영향을 미치는 것으로 나타났다.
- 문제 해결(기능과 기대효과)
    - 개발 목표
        - 라즈베리파이와 네오픽셀을 연결하여 구동
        - 라즈베리파이와 구글 클라우드 플랫폼을 활용한 서버 및 데이터베이스 구축
        - DialogFlow를 통한 구글 어시스턴트 앱과 챗봇으로 제어하는 시스템 구축
        - 구글 어시스턴트를 활용해 음성 제어 기술 활용
    - 필요 조건
        - 모니터 조작이 가능해야 한다.
        - 자동 밝기 조절이 가능해야 한다.
        - 음성인식이 가능해야 한다.
        - 무드등 색 조절이 가능해야 한다.
    - 기대효과
        - 네오픽셀과 라즈베리파이 동작 원리에 대해 이해하고 활용할 수 있다.
        - 구글 어시스턴트를 활용한 사용자의 제어가 가능한 무드등을 사용할 수 있다.

## **👫 팀 구성**

<img width="480" alt="스크린샷 2022-12-01 오후 1 00 37" src="https://user-images.githubusercontent.com/67767912/204967310-0238cbb4-9f08-4957-a2e5-9df8043db44b.png">

## 💻 개발 내용

- 예상 작품 구성도
    <img width="440" alt="스크린샷 2022-12-01 오후 1 41 52" src="https://user-images.githubusercontent.com/67767912/204967346-2febd4e8-d023-4189-883f-7bb8b09fcc5d.png">

  <img width="556" alt="스크린샷 2022-12-01 오후 1 42 02" src="https://user-images.githubusercontent.com/67767912/204967366-f17dd9ed-73c2-46f5-9b6f-a06e7a2c2d4c.png">

    
1. 플로우 차트
    <img width="498" alt="스크린샷 2022-12-01 오후 1 42 26" src="https://user-images.githubusercontent.com/67767912/204967413-f6f0f1dc-3926-451e-b57d-d4fc4fa35554.png">

    
2. 회로도
    <img width="537" alt="스크린샷 2022-12-01 오후 1 42 37" src="https://user-images.githubusercontent.com/67767912/204967434-e288fcfa-5a28-4b86-85c3-cfcd3c43768a.png">

    
3. 라즈베리파이와 네오픽셀, 조도 센서
    
    <img width="547" alt="스크린샷 2022-12-01 오후 1 42 49" src="https://user-images.githubusercontent.com/67767912/204967462-4304c686-c1aa-4847-900c-4394909cf608.png">

    - 조도센서를 활용해 네오픽셀 제어를 성공했다.
    <img width="542" alt="스크린샷 2022-12-01 오후 1 43 16" src="https://user-images.githubusercontent.com/67767912/204967522-3a108457-71ea-4448-9ca1-254738b004cd.png">

    
    - 라즈베리파이에서 네오픽셀 제어를 성공했다.
4. 라즈베리파이에서 사용할 인터페이스 제작
    <img width="545" alt="스크린샷 2022-12-01 오후 1 43 31" src="https://user-images.githubusercontent.com/67767912/204967556-37463fce-ea57-439d-89bf-28b190058be4.png">

    
5. 라즈베리파이와 DialogFlow 챗봇 연동(구글 어시스턴트)
    <img width="575" alt="스크린샷 2022-12-01 오후 1 43 56" src="https://user-images.githubusercontent.com/67767912/204967607-109995e4-57ce-43a9-8f48-287dbb087ad6.png">

    
    - DialodFlow 구글 어시스턴트 앱으로 동작
    <img width="553" alt="스크린샷 2022-12-01 오후 1 44 18" src="https://user-images.githubusercontent.com/67767912/204967666-cf04fb0a-1670-4eba-abdd-fecac1864101.png">

   
    
    - 무드등 호출 이름 지정
    <img width="553" alt="스크린샷 2022-12-01 오후 1 44 38" src="https://user-images.githubusercontent.com/67767912/204967699-f68f28a6-f1e0-4b62-aaab-e57e111290bb.png">

    
    - 무드등 호출 후 test 실행 화면
    
6. 외형 3D 디자인

    <img width="390" alt="스크린샷 2022-12-01 오후 1 45 06" src="https://user-images.githubusercontent.com/67767912/204967764-5638f6c6-3a04-42ec-ada2-d6abcd01a2f5.png">

    
    
    - 10cm 정육면체 도형에 원, 별, 달 모양을 Combine 후 Subtract으로 구멍을 뚫어줌
    <img width="545" alt="스크린샷 2022-12-01 오후 1 45 20" src="https://user-images.githubusercontent.com/67767912/204967791-43a193ec-d975-4bbe-a0ab-92fd48fd0e31.png">

    
    - 가로, 세로 11cm, 높이 1.5의 정사각형 받침대를 만들고 Extrude 기능으로 1cm 무드등을 끼울 구멍을 뚫음
    
- 시연 영상    
    

https://user-images.githubusercontent.com/67767912/204968178-fd8a3005-1a5e-4b21-927b-9265103f3e0f.mp4



https://user-images.githubusercontent.com/67767912/204968186-1c2902ed-b5c4-49c8-ba5d-5a28f2dddcd2.mp4


- 현실적 제한 조건
    
    <img width="520" alt="스크린샷 2022-12-01 오후 1 45 36" src="https://user-images.githubusercontent.com/67767912/204967817-8581df80-caf8-4cea-b34c-29aab79e8697.png">

    

## **💻 내가 담당한 파트**

[라즈베리파이에서 사용할 인터페이스 제작](https://www.notion.so/4025ffb80edc4447af4e6a80d4fd97d3) 

[라즈베리파이와 DialogFlow 챗봇 연동(구글 어시스턴트)](https://www.notion.so/DialogFlow-43e0a76a8581431d852749b09cb34494) 

## ✏️후기 및 에세이

이번 프로젝트를 통해서 구글 클라우드 플랫폼의 구동 원리에 대해 이해하게 되었고, 라즈베리파이를 구글 클라우드 플랫폼과 연동하는 방법에 대해 숙지하게 되었다. 라즈베리파이를 다루는 것은 이제 가볍게 다룰 수 있게 되었고, 구글의 Firebase를 통해 실시간 데이터베이스를 구축하는 것과 Dialogflow에서 챗봇을 만들어 간단한 대화나 음성으로 제어를 가능하게 하는 환경을 만들 수 있게 되었다. 이 분야는 IoT 기기 산업에 가장 활발하게 이루어지는 부분이라고 생각하고, 구글 클라우드 플랫폼으로 무드등 뿐 아니라 다양한 기기와 접목할 수 있을 것으로 기대한다. 그리고 파이썬을 통해 tkinter로 GUI 프로그래밍을 성공적으로 진행하며 파이썬으로 코드를 구성하는 것을 익힐 수 있었다.

시중의 IoT 제품을 보면서 만드는 것이 너무 어렵지 않을까 어떤 원리로 구동이 되는 것인가 너무 궁금했었다. 그리고 구글링을 통해서 구글 클라우드 플랫폼으로 간단하게 IoT 기기를 제어하는 것이 생각보다 간단히 제작할 수 있다는 것을 느꼈다. 하지만 더 원활하게 작동시키기 위해서 더 많은 공부를 해야겠다는 생각이 들었다. 연동이 오류 없이 잘 진행될 수 있도록 처음부터 꼼꼼하게 챗봇을 만들고, 데이터베이스를 구축하여 명령을 내릴 수 있도
록 만들어야 한다는 점을 개선할 점으로 꼽을 수 있을 것 같다. GUI 프로그래밍을 막막하게 생각했는데 파이썬으로 간단히 만들 수 있어서 재미있었다.

## **🗓️ 추진 일정**
<img width="574" alt="스크린샷 2022-12-01 오후 1 45 49" src="https://user-images.githubusercontent.com/67767912/204967841-2784b5c3-013c-4e02-9e39-f4bad708365b.png">
